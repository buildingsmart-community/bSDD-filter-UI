import{r as v,z as Q,D as x,G as T,j as o,B as b,H as I,E,L,U as de,T as X,M as Y,J as ue,I as B,q as ee,N as pe,l as ve,P as $,Q as fe,S as me,V as G,W as F,b as S,X as he,s as ye,Y as xe,Z as ge,_ as H,$ as N,a0 as W,a1 as k,a2 as Ce,a3 as je,a4 as be,a5 as we,a6 as Se}from"./defaultSettings-7c1ceb79.js";function z(s,r){return e=>{s?.(e),r?.(e)}}function Ne(s=!1,r){const{onOpen:e,onClose:t}=r||{},[n,a]=v.useState(s),l=v.useCallback(()=>{a(c=>c||(e?.(),!0))},[e]),i=v.useCallback(()=>{a(c=>c&&(t?.(),!1))},[t]),u=v.useCallback(()=>{n?i():l()},[i,l,n]);return[n,{open:l,close:i,toggle:u}]}var A={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Z={orientation:"horizontal"},De=I((s,{borderWidth:r})=>({group:{"--ai-border-width":E(r)}})),U=Q((s,r)=>{const e=x("ActionIconGroup",Z,s),{className:t,style:n,classNames:a,styles:l,unstyled:i,orientation:u,vars:c,borderWidth:p,variant:m,mod:h,...C}=x("ActionIconGroup",Z,s),y=T({name:"ActionIconGroup",props:e,classes:A,className:t,style:n,classNames:a,styles:l,unstyled:i,vars:c,varsResolver:De,rootSelector:"group"});return o.jsx(b,{...y("group"),ref:r,variant:m,mod:[{"data-orientation":u},h],role:"group",...C})});U.classes=A;U.displayName="@mantine/core/ActionIconGroup";const Pe={},Te=I((s,{size:r,radius:e,variant:t,gradient:n,color:a,autoContrast:l})=>{const i=s.variantColorResolver({color:a||s.primaryColor,theme:s,gradient:n,variant:t||"filled",autoContrast:l});return{root:{"--ai-size":ue(r,"ai-size"),"--ai-radius":e===void 0?void 0:B(e),"--ai-bg":a||t?i.background:void 0,"--ai-hover":a||t?i.hover:void 0,"--ai-hover-color":a||t?i.hoverColor:void 0,"--ai-color":i.color,"--ai-bd":a||t?i.border:void 0}}}),D=L((s,r)=>{const e=x("ActionIcon",Pe,s),{className:t,unstyled:n,variant:a,classNames:l,styles:i,style:u,loading:c,loaderProps:p,size:m,color:h,radius:C,__staticSelector:y,gradient:j,vars:d,children:f,disabled:g,"data-disabled":O,autoContrast:V,mod:le,...ie}=e,M=T({name:["ActionIcon",y],props:e,className:t,style:u,classes:A,classNames:l,styles:i,unstyled:n,vars:d,varsResolver:Te});return o.jsxs(de,{...M("root",{active:!g&&!c&&!O}),...ie,unstyled:n,variant:a,size:m,disabled:g||c,ref:r,mod:[{loading:c,disabled:g||O},le],children:[o.jsx(X,{mounted:!!c,transition:"slide-down",duration:150,children:ce=>o.jsx(b,{component:"span",...M("loader",{style:ce}),"aria-hidden":!0,children:o.jsx(Y,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...p})})}),o.jsx(b,{component:"span",mod:{loading:c},...M("icon"),children:f})]})});D.classes=A;D.displayName="@mantine/core/ActionIcon";D.Group=U;var oe={root:"m_9814e45f"};const Ie={zIndex:ee("modal")},Oe=I((s,{gradient:r,color:e,backgroundOpacity:t,blur:n,radius:a,zIndex:l})=>({root:{"--overlay-bg":r||(e!==void 0||t!==void 0)&&pe(e||"#000",t??.6)||void 0,"--overlay-filter":n?`blur(${E(n)})`:void 0,"--overlay-radius":a===void 0?void 0:B(a),"--overlay-z-index":l?.toString()}})),_=L((s,r)=>{const e=x("Overlay",Ie,s),{classNames:t,className:n,style:a,styles:l,unstyled:i,vars:u,fixed:c,center:p,children:m,radius:h,zIndex:C,gradient:y,blur:j,color:d,backgroundOpacity:f,mod:g,...O}=e,V=T({name:"Overlay",props:e,classes:oe,className:n,style:a,classNames:t,styles:l,unstyled:i,vars:u,varsResolver:Oe});return o.jsx(b,{ref:r,...V("root"),mod:[{center:p,fixed:c},g],...O,children:m})});_.classes=oe;_.displayName="@mantine/core/Overlay";var se={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const q={withShadow:!0},ke=I((s,{radius:r,size:e})=>({root:{"--cs-radius":r===void 0?void 0:B(r),"--cs-size":E(e)}})),P=L((s,r)=>{const e=x("ColorSwatch",q,s),{classNames:t,className:n,style:a,styles:l,unstyled:i,vars:u,color:c,size:p,radius:m,withShadow:h,children:C,variant:y,...j}=x("ColorSwatch",q,e),d=T({name:"ColorSwatch",props:e,classes:se,className:n,style:a,classNames:t,styles:l,unstyled:i,vars:u,varsResolver:ke});return o.jsxs(b,{ref:r,variant:y,size:p,...d("root",{focusable:!0}),...j,children:[o.jsx("span",{...d("alphaOverlay")}),h&&o.jsx("span",{...d("shadowOverlay")}),o.jsx("span",{...d("colorOverlay",{style:{backgroundColor:c}})}),o.jsx("span",{...d("childrenOverlay"),children:C})]})});P.classes=se;P.displayName="@mantine/core/ColorSwatch";function ze({open:s,close:r,openDelay:e,closeDelay:t}){const n=v.useRef(-1),a=v.useRef(-1),l=()=>{window.clearTimeout(n.current),window.clearTimeout(a.current)},i=()=>{l(),e===0||e===void 0?s():n.current=window.setTimeout(s,e)},u=()=>{l(),t===0||t===void 0?r():a.current=window.setTimeout(r,t)};return v.useEffect(()=>l,[]),{openDropdown:i,closeDropdown:u}}const[_e,re]=ve("HoverCard component was not found in the tree"),Ae={};function te(s){const{children:r,onMouseEnter:e,onMouseLeave:t,...n}=x("HoverCardDropdown",Ae,s),a=re(),l=z(e,a.openDropdown),i=z(t,a.closeDropdown);return o.jsx($.Dropdown,{onMouseEnter:l,onMouseLeave:i,...n,children:r})}te.displayName="@mantine/core/HoverCardDropdown";const Me={refProp:"ref"},ne=v.forwardRef((s,r)=>{const{children:e,refProp:t,eventPropsWrapperName:n,...a}=x("HoverCardTarget",Me,s);if(!fe(e))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const l=re(),i=z(e.props.onMouseEnter,l.openDropdown),u=z(e.props.onMouseLeave,l.closeDropdown),c={onMouseEnter:i,onMouseLeave:u};return o.jsx($.Target,{refProp:t,ref:r,...a,children:v.cloneElement(e,n?{[n]:c}:c)})});ne.displayName="@mantine/core/HoverCardTarget";const He={openDelay:0,closeDelay:150,initiallyOpened:!1};function w(s){const{children:r,onOpen:e,onClose:t,openDelay:n,closeDelay:a,initiallyOpened:l,...i}=x("HoverCard",He,s),[u,{open:c,close:p}]=Ne(l,{onClose:t,onOpen:e}),{openDropdown:m,closeDropdown:h}=ze({open:c,close:p,openDelay:n,closeDelay:a});return o.jsx(_e,{value:{openDropdown:m,closeDropdown:h},children:o.jsx($,{...i,opened:u,__staticSelector:"HoverCard",children:r})})}w.displayName="@mantine/core/HoverCard";w.Target=ne;w.Dropdown=te;w.extend=s=>s;var ae={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const J={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:ee("overlay")},Re=I((s,{zIndex:r})=>({root:{"--lo-z-index":r?.toString()}})),K=Q((s,r)=>{const e=x("LoadingOverlay",J,s),{classNames:t,className:n,style:a,styles:l,unstyled:i,vars:u,transitionProps:c,loaderProps:p,overlayProps:m,visible:h,zIndex:C,...y}=e,j=me(),d=T({name:"LoadingOverlay",classes:ae,props:e,className:n,style:a,classNames:t,styles:l,unstyled:i,vars:u,varsResolver:Re}),f={...J.overlayProps,...m};return o.jsx(X,{transition:"fade",...c,mounted:!!h,children:g=>o.jsxs(b,{...d("root",{style:g}),ref:r,...y,children:[o.jsx(Y,{...d("loader"),unstyled:i,...p}),o.jsx(_,{...f,...d("overlay"),darkHidden:!0,unstyled:i,color:m?.color||j.white}),o.jsx(_,{...f,...d("overlay"),lightHidden:!0,unstyled:i,color:m?.color||j.colors.dark[5]})]})})});K.classes=ae;K.displayName="@mantine/core/LoadingOverlay";/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ee=G("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Le=G("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Be=G("outline","pointer","IconPointer",[["path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z",key:"svg-0"}]]);const R={grey:"#B0B0B0",red:"#FF0000",orange:"#FFA500",green:"#00C853"};function $e(s){const{type:r}=s;return r==="IfcClassificationReference"}function Ge(s,r){const e=r.referencedSource;return e&&e.location?e.location===s:!1}function Fe(s,r){const e=s.hasAssociations;return e&&e.find(n=>$e(n)&&Ge(r.ifcClassification?.location,n))?r.ifcClassification?.location:null}function Ue({item:s,index:r,setCardColor:e}){const{t}=F(),n=S(he),a=S(ye);S(xe);const{bsddSearch:l,bsddSelect:i}=ge(),[u,c]=v.useState("grey"),[p,m]=v.useState([]),[h,C]=v.useState([]);v.useEffect(()=>{function d(f){c(f),e(r,f)}p.every(f=>f!==null)?d("green"):p.some(f=>f!==null)?d("orange"):d("red")},[p,r,e]),v.useEffect(()=>{const d=p.map(f=>f!==null?"green":"red");C(d)},[p]),v.useEffect(()=>{m(n.map(d=>Fe(s,d)))},[s,n]);function y(d){l([d])}function j(d){i([d])}return o.jsxs(H,{mt:"xs",justify:"space-between",className:"flexGroup",children:[o.jsx(P,{size:"1.5em",color:R[u]}),o.jsxs(w,{position:"bottom-end",shadow:"md",children:[o.jsx(w.Target,{children:o.jsx("div",{className:"flexTextContainer",children:o.jsx(N,{className:"truncate",children:s.name})})}),o.jsxs(w.Dropdown,{children:[o.jsxs(N,{children:[t("dictionaryValidationSummaryLabel"),":"]}),n.map((d,f)=>{const g=d.ifcClassification.location||f;return o.jsxs(H,{mt:"xs",justify:"space-between",className:"flexGroup",children:[o.jsx(P,{size:"1em",color:R[h[f]]}),o.jsx("div",{className:"flexTextContainer",children:o.jsx(N,{className:"truncate",children:d.ifcClassification.name})})]},g)})]})]}),o.jsx(W,{label:t("attachToType"),children:o.jsx(D,{radius:"xl",onClick:()=>y(s),disabled:!a?.ifcClassification?.location,children:o.jsx(Le,{size:20})})}),o.jsx(W,{label:t("selectObjects"),children:o.jsx(D,{radius:"xl",onClick:()=>j(s),children:o.jsx(Be,{size:20})})})]})}function Ke({category:s,items:r,index:e}){const{t}=F(),[n,a]=v.useState("grey"),[l,i]=v.useState(new Array(r.length).fill("grey")),u=v.useCallback((c,p)=>{i(m=>{const h=[...m];return h[c]=p,h})},[]);return v.useEffect(()=>{l.includes("orange")||l.includes("red")&&l.includes("green")?a("orange"):l.every(c=>c==="red")?a("red"):l.every(c=>c==="green")&&a("green")},[l]),o.jsxs(k.Item,{value:e,children:[o.jsx(k.Control,{children:o.jsxs(H,{justify:"space-between",className:"flexGroup",children:[o.jsx(P,{size:"1.5em",color:R[n],children:o.jsx(N,{size:"xs",c:"white",children:r.length})}),o.jsx("div",{className:"flexTextContainer",children:o.jsx(N,{className:"truncate",children:s.length>0?s:t("noDescription")})})]})}),o.jsx(k.Panel,{mt:"-xs",pl:"xl",children:r.map((c,p)=>o.jsx(Ue,{item:c,index:p,setCardColor:u},p))})]},s)}function Ve(s,r){const e=s.reduce((t,n)=>{const a=n[r];return a===void 0||typeof a!="string"?(t[""]||(t[""]=[]),t[""].push(n)):(t[a]||(t[a]=[]),t[a].push(n)),t},{});return Object.keys(e).sort((t,n)=>t.localeCompare(n,void 0,{numeric:!1})).reduce((t,n)=>(t[n]=e[n],t),{})}function We({loading:s}){const{t:r}=F(),e=S(Ce),[t,n]=v.useState("objectType"),a=v.useMemo(()=>e?Object.entries(Ve(e,t)).map(([u,c],p)=>o.jsx(Ke,{category:u,items:c,index:u||p.toString()},u)):[],[t,e]),l=o.jsx(Ee,{});return o.jsxs(b,{pos:"relative",style:{height:"100vh"},children:[o.jsx(K,{visible:s||!e}),e&&a.length===0?o.jsxs(je,{title:"No entities selected...",icon:l,mt:"xl",children:[r("entitySelectionInstruction"),o.jsx(be,{h:"md"}),r("needHelp")," ",o.jsx("a",{href:"https://github.com/buildingsmart-community/bSDD-Revit-plugin/wiki",target:"_blank",rel:"noreferrer",children:r("checkDocumentation")})]}):o.jsxs(b,{children:[o.jsx(we,{my:"md",label:r("groupBy"),placeholder:"Select a key",data:[{value:"type",label:"Entity"},{value:"name",label:"Name"},{value:"description",label:"Description"},{value:"objectType",label:"ObjectType"},{value:"predefinedType",label:"PredefinedType"}],value:t,onChange:i=>{i&&n(i)}}),o.jsx(k,{chevronPosition:"left",children:a})]})]})}function qe(){const s=S(Se),[r,e]=v.useState(!0);return v.useEffect(()=>{s&&e(!1)},[s]),o.jsx(We,{loading:r})}export{qe as B,_ as O,Ne as u};
