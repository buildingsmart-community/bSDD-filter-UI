import{r as u,L as Re,D as se,G as be,j as n,B as ne,H as xe,I as Te,v as Le,z as Ce,o as Be,ai as Ne,aj as He,am as _e,ak as we,an as $e,ao as P,ag as ae,ap as Fe,w as ze,V as Ge,W as z,b as D,ay as Se,aJ as $,aK as oe,aL as Ue,aI as re,aM as We,_ as W,aN as Ye,$ as fe,y as je,u as G,aO as Ke,aP as Je,aQ as Ze,aR as Ie,aS as qe,a0 as ee,aT as Qe,aU as Xe,aG as De,aV as et,aH as F,a5 as tt,aW as U,t as pe,aX as st,aY as Ve,aZ as nt,f as Oe,a1 as R,s as Ee,a_ as at,a$ as ot,b0 as rt,b1 as te,Z as lt,b2 as it,b3 as ct,b4 as ut,b5 as dt,Y as ft,b6 as pt,a8 as ht,b7 as mt,b8 as gt,C as yt,aw as he,a3 as vt,a4 as bt}from"./defaultSettings-7c1ceb79.js";function xt(t,e,s={leading:!1}){const[a,r]=u.useState(t),l=u.useRef(!1),o=u.useRef(null),f=u.useRef(!1),c=()=>window.clearTimeout(o.current);return u.useEffect(()=>{l.current&&(!f.current&&s.leading?(f.current=!0,r(t)):(c(),o.current=window.setTimeout(()=>{f.current=!1,r(t)},e)))},[t,s.leading,e]),u.useEffect(()=>(l.current=!0,c),[]),[a,c]}var ke={root:"m_1b7284a3"};const Ct={},wt=xe((t,{radius:e,shadow:s})=>({root:{"--paper-radius":e===void 0?void 0:Te(e),"--paper-shadow":Le(s)}})),K=Re((t,e)=>{const s=se("Paper",Ct,t),{classNames:a,className:r,style:l,styles:o,unstyled:f,withBorder:c,vars:p,radius:x,shadow:y,variant:i,mod:v,...d}=s,h=be({name:"Paper",props:s,classes:ke,className:r,style:l,classNames:a,styles:o,unstyled:f,vars:p,varsResolver:wt});return n.jsx(ne,{ref:e,mod:[{"data-with-border":c},v],...h("root"),variant:i,...d})});K.classes=ke;K.displayName="@mantine/core/Paper";const St={},le=Ce((t,e)=>{const s=se("Autocomplete",St,t),{classNames:a,styles:r,unstyled:l,vars:o,dropdownOpened:f,defaultDropdownOpened:c,onDropdownClose:p,onDropdownOpen:x,onFocus:y,onBlur:i,onClick:v,onChange:d,data:h,value:m,defaultValue:S,selectFirstOptionOnChange:C,onOptionSubmit:w,comboboxProps:V,readOnly:k,disabled:E,filter:b,limit:g,withScrollArea:j,maxDropdownHeight:I,size:M,id:H,renderOption:L,autoComplete:_,scrollAreaProps:J,...O}=s,A=Be(H),B=Ne(h),Pe=He(B),[Z,ce]=_e({value:m,defaultValue:S,finalValue:"",onChange:d}),N=we({opened:f,defaultOpened:c,onDropdownOpen:x,onDropdownClose:()=>{p?.(),N.resetSelectedOption()}}),{resolvedClassNames:ue,resolvedStyles:de}=$e({props:s,styles:r,classNames:a});return u.useEffect(()=>{C&&N.selectFirstOption()},[C,Z]),n.jsxs(P,{store:N,__staticSelector:"Autocomplete",classNames:ue,styles:de,unstyled:l,readOnly:k,onOptionSubmit:T=>{w?.(T),ce(Pe[T].label),N.closeDropdown()},size:M,...V,children:[n.jsx(P.Target,{autoComplete:_,children:n.jsx(ae,{ref:e,...O,size:M,__staticSelector:"Autocomplete",disabled:E,readOnly:k,value:Z,onChange:T=>{ce(T.currentTarget.value),N.openDropdown(),C&&N.selectFirstOption()},onFocus:T=>{N.openDropdown(),y?.(T)},onBlur:T=>{N.closeDropdown(),i?.(T)},onClick:T=>{N.openDropdown(),v?.(T)},classNames:ue,styles:de,unstyled:l,id:A})}),n.jsx(Fe,{data:B,hidden:k||E,filter:b,search:Z,limit:g,hiddenWhenEmpty:!0,withScrollArea:j,maxDropdownHeight:I,unstyled:l,labelId:O.label?`${A}-label`:void 0,"aria-label":O.label?void 0:O["aria-label"],renderOption:L,scrollAreaProps:J})]})});le.classes={...ae.classes,...P.classes};le.displayName="@mantine/core/Autocomplete";var Me={root:"m_6d731127"};const jt={gap:"md",align:"stretch",justify:"flex-start"},It=xe((t,{gap:e,align:s,justify:a})=>({root:{"--stack-gap":ze(e),"--stack-align":s,"--stack-justify":a}})),ie=Ce((t,e)=>{const s=se("Stack",jt,t),{classNames:a,className:r,style:l,styles:o,unstyled:f,vars:c,align:p,justify:x,gap:y,variant:i,...v}=s,d=be({name:"Stack",props:s,classes:Me,className:r,style:l,classNames:a,styles:o,unstyled:f,vars:c,varsResolver:It});return n.jsx(ne,{ref:e,...d("root"),variant:i,...v})});ie.classes=Me;ie.displayName="@mantine/core/Stack";/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dt=Ge("outline","grip-horizontal","IconGripHorizontal",[["path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);const Vt={test:"https://test.bsdd.buildingsmart.org",production:"https://api.bsdd.buildingsmart.org"},Ot="production";function Et({callback:t,ifcEntity:e}){const{t:s}=z();D(Se);const a=$(oe),r=$(Ue);function l(f){const c=f?{...JSON.parse(JSON.stringify(f))}:{hasAssociations:[],isDefinedBy:[]};return c.isDefinedBy=a?.filter(p=>p.name!=="Attributes"),c.hasAssociations=[],r?.forEach(p=>{if(p.type==="IfcClassificationReference"&&p?.referencedSource?.location?.includes("https://identifier.buildingsmart.org/uri/buildingsmart/ifc/")){const{type:x,predefinedType:y}=We(p.identification);x&&(c.type=x),y&&(c.predefinedType=y),c.predefinedType||(c.predefinedType="NOTDEFINED")}else c.hasAssociations?.push(p)}),c}const o=()=>{const f=l(e);console.log(f),t(f)};return n.jsx(re,{color:"gray",fullWidth:!0,onClick:o,variant:"filled",children:s("apply")})}const me=25,kt=25;function ge({height:t,options:e,label:s,value:a,setValue:r,placeholder:l="Search values",disabled:o}){const[f,c]=u.useState(""),[p,x]=u.useState(e.slice(0,me)),y=u.useRef(null),i=we({onDropdownClose:()=>{i.resetSelectedOption(),i.focusTarget&&i.focusTarget()},onDropdownOpen:()=>{i.focusSearchInput&&i.focusSearchInput()}});u.useEffect(()=>{c(a?.label||"")},[a]),u.useEffect(()=>{const h=a===null?e.filter(m=>m?.label.toLowerCase().includes(f.toLowerCase().trim())||m?.value.toString().toLowerCase().includes(f.toLowerCase().trim())):e;x(h.slice(0,me))},[e,f,a]);const v=h=>{const{scrollTop:m,scrollHeight:S,clientHeight:C}=h.currentTarget,w=5;S-m<=C+w&&x(k=>{const E=k.length,b=e.filter(g=>g?.label.toLowerCase().includes(f.toLowerCase().trim())).slice(E,E+kt);return[...k,...b]})},d=p.map(h=>n.jsx(P.Option,{value:h.value,active:a?.value===h.value,children:n.jsxs(W,{gap:"sm",children:[a?.value===h.value?n.jsx(Ye,{size:12}):null,n.jsx(fe,{fz:"sm",opacity:o?.6:1,children:h.label}),n.jsxs(fe,{fz:"xs",opacity:.6,children:["(",h.value,")"]})]})},h.value));return n.jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:n.jsxs(P,{store:i,onOptionSubmit:h=>{if(!o){const m=e.find(C=>C.value===h),S=m&&a?.value!==m.value?m:null;r(S),i.closeDropdown()}},disabled:o,children:[n.jsx(P.Target,{children:n.jsx(ae,{rightSection:!o&&n.jsx(je,{size:"sm",onMouseDown:h=>{h.preventDefault()},onClick:()=>{c(""),r(null)},"aria-label":"Clear value"}),label:s,value:a?`${a.label} (${a.value})`:f,onChange:h=>{o||(r(null),i.updateSelectedOptionIndex(),c(h.currentTarget.value))},onClick:()=>{o||i.openDropdown()},onBlur:()=>i.closeDropdown(),placeholder:o?"":l,disabled:o})}),t<80?n.jsx(P.Dropdown,{style:{maxHeight:"20em",overflowY:"auto"},ref:y,onScroll:v,children:n.jsx(P.Options,{children:d.length>0?d:n.jsx(P.Empty,{children:"Nothing found..."})})}):n.jsx(K,{withBorder:!0,my:"0.2em",style:{flexGrow:1,overflow:"auto",backgroundColor:o?"var(--mantine-color-gray-0)":"transparent",color:o?"var(--mantine-color-gray-6)":"inherit",pointerEvents:o?"none":"auto"},ref:y,onScroll:v,children:n.jsx(P.Options,{children:d.length>0?d:n.jsx(P.Empty,{children:"Nothing found..."})})})]})})}function Mt({height:t,handleMouseDown:e}){const s=G(),{t:a}=z(),[r,l]=u.useState(new Map),[o,f]=u.useState(new Map),c=D(Ke),p=D(Je),x=$(Se),y=$(Ze),i=$(Ie),v=$(qe);return u.useEffect(()=>{(async()=>{const m=Array.from(c.entries()).map(async([V,k])=>{if(i&&V===v){const{code:I,name:M,uri:H}=i;return[V,[{value:I,label:M,uri:H}]]}let E=[];const b=y[V],g=i?.classRelations?.map(I=>I.relatedClassUri),j=b?.filter(I=>g?.includes(I.uri));if(j&&j.length>0)E=j.map(I=>({value:I.code,label:I.name,uri:I.uri}));else try{E=(await s(Qe(V)).unwrap())?.map(M=>({value:M.code,label:M.name||"",uri:M.uri}))??[]}catch(I){console.error("Failed to fetch dictionary classes for",V,I),E=[]}return[V,E]}),S=await Promise.all(m),C=new Map(S);l(C);const w=new Map;C.forEach((V,k)=>{if(V.length===1)w.set(k,V[0]);else if(k in p){const E=p[k];if(E.length===1){const b=E[0];if(V.some(j=>j.value===b.identification)){const j={label:b.name||"",value:b.identification||"",uri:b.location||""};w.set(k,j)}}}}),f(w)})()},[c,y,s,p,i,v]),u.useEffect(()=>{(()=>{const h=Array.from(o.entries()).map(([m,S])=>{if(!S||!S.value)return null;const C=x[m];return{type:"IfcClassificationReference",name:S.label,location:S.uri,identification:S.value,referencedSource:{type:"IfcClassification",name:C.name,location:C.uri,edition:C.version,editionDate:C.releaseDate}}}).filter(m=>m!==null);h.length>0&&s(Xe(h))})()},[x,s,o]),n.jsxs(K,{style:{height:`${t}px`,position:"relative"},children:[Array.from(c.entries()).map(([d,h])=>{const m=d===v,S=d===i?.dictionaryUri;return m?n.jsx(ge,{height:t,label:h.name,options:r.get(d)||[],value:o.get(d)||null,setValue:C=>{const w=new Map(o);w.set(d,C),f(w)},placeholder:a("classifications.searchClassesPlaceholder"),disabled:r.get(d)?.length===1},d):S?null:n.jsx(ge,{height:t,label:h.name,options:r.get(d)||[],value:o.get(d)||null,setValue:C=>{const w=new Map(o);w.set(d,C),f(w)},placeholder:a("classifications.searchClassesPlaceholder"),disabled:r.get(d)?.length===1},d)}),n.jsx(ne,{onMouseDown:e,style:{marginTop:"4px"},children:n.jsx(ee,{label:a("classifications.dragResize"),withArrow:!0,children:n.jsx(re,{fullWidth:!0,variant:"subtle",size:"sm",color:"gray","aria-label":a("classifications.dragResize"),children:n.jsx(Dt,{})})})})]})}function q(t,e){return t==null||e==null?null:t.toLowerCase()!==e.toLowerCase()?`(${e})`:null}function At({label:t,description:e,value:s,setValue:a,disabled:r,inputContainer:l}){const{t:o}=z(),[f,c]=u.useState(!1),[p,x]=u.useState(!0),y=()=>o(p?"checkbox.indeterminate":f?"checkbox.true":"checkbox.false"),i=d=>{d.target.indeterminate=!1,a(d.target.checked)};u.useEffect(()=>{s===!0?(c(!0),x(!1)):s===!1?(c(!1),x(!1)):s===void 0&&(c(!1),x(!0))},[s]);const v=n.jsx(De,{description:y(),checked:f,indeterminate:p,type:"checkbox",onChange:d=>i(d),disabled:r});return n.jsx(et.Wrapper,{label:t,description:e,children:l?l(v):v})}const Q=(t,e,s,a)=>t.map(r=>{if(r.name===e){const l=r.hasProperties.map(o=>o.name===s?{...o,...a}:o);return{...r,hasProperties:l}}return r}),Pt=(t,e,s)=>{const a=`${e}/${s}`;return t.hasOwnProperty(a)?t[a]:t[s]||!1};function Rt({propertySet:t,property:e,propertyNaturalLanguageName:s}){const a=G(),r=D(oe),l=D(d=>d.ifcData.propertyIsInstanceMap),o=D(d=>d.ifcData.savedPropertyIsInstanceMap),[f,c]=u.useState(),p=t.name!=="Attributes",x=`${t.name}/${e.name}`,y=o.hasOwnProperty(x)||o.hasOwnProperty(e.name),i=Pt(l,t.name||"",e.name),v=d=>p&&i?n.jsx(ee,{label:pe("bsddSearch.property.tooltipEditInstance"),withArrow:!0,children:d}):d;return u.useEffect(()=>{switch(e.type){case"IfcPropertySingleValue":{e.nominalValue.type==="IfcBoolean"?c(n.jsx(At,{label:s,description:q(s,e.name),disabled:i,inputContainer:v,value:e.nominalValue.value,setValue:d=>{if(r&&t.name){const h={nominalValue:{...e.nominalValue,value:d}},m=Q(r,t.name,e.name,h);a(U(Object.values(m)))}}})):c(n.jsx(F,{label:s,description:q(s,e.name),placeholder:e.nominalValue.value,value:e.nominalValue.value||"",disabled:i,inputContainer:v,onChange:d=>{if(r&&t.name){const h={nominalValue:{...e.nominalValue,value:d.target.value}},m=Q(r,t.name,e.name,h);a(U(Object.values(m)))}}}));break}case"IfcPropertyEnumeratedValue":{const d=e.enumerationValues?.[0]?.value,h=e.enumerationReference?.enumerationValues||[];c(n.jsx(tt,{label:s,description:q(s,e.name),value:d,inputContainer:v,disabled:i||e.enumerationReference?.enumerationValues?.length===1,onChange:m=>{if(r&&t.name){const S=h.find(V=>V.value===m),C={enumerationValues:S?[S]:[]},w=Q(r,t.name,e.name,C);a(U(Object.values(w)))}},data:h.map(m=>({value:m.value,label:m.value}))}));break}default:{c(n.jsx(F,{placeholder:e.name,value:"{ifcProperty.nominalValue}",disabled:i,inputContainer:v}));break}}},[e,t,c,s,a,r,i]),n.jsxs(W,{children:[n.jsx("div",{style:{flex:1},children:f}),p&&n.jsx(ee,{label:pe("bsddSearch.property.setAsInstanceCheckboxTooltip"),withArrow:!0,children:n.jsx(De,{style:{marginTop:"2rem"},disabled:y,checked:i,onChange:d=>{y||a(st({propertyName:x,value:d.currentTarget.checked}))}})})]})}const Tt={Boolean:"IfcBoolean",Character:"IfcText",Integer:"IfcInteger",Real:"IfcReal",String:"IfcText",Time:"IfcDateTime"};function Y(t,e){const s=t&&Tt[t]||"default";let a;return t==="Boolean"&&typeof e=="string"?e.toUpperCase()==="TRUE"?a=!0:e.toUpperCase()==="FALSE"?a=!1:a=void 0:a=e,{type:s,value:a}}function Ae(t,e,s){let a;if(t&&t.isDefinedBy){let r=t.isDefinedBy.find(l=>l.name===e);if(r&&(a=r.hasProperties.find(l=>l.name===s)),a)return a;if(r=t.isDefinedBy.find(l=>l.name===""),r)return r.hasProperties.find(l=>l.name===s)}return a}function Lt(t,e,s,a){const l=Ae(e,s,a)?.nominalValue?.value??null;return Y(t,l)}function Bt(t,e,s,a,r){const l=Ae(e,s,a);if(l){if(l.type==="IfcPropertyEnumeratedValue")return r.filter(o=>l.enumerationValues?l.enumerationValues.some(f=>f.value===o.value):!1);if("nominalValue"in l&&l.nominalValue){const o=r.find(f=>f.value===l.nominalValue.value);return o?[o]:[]}}return[]}function Nt(t,e,s,a){const r=t.allowedValues?.map(f=>Y(t.dataType,f.value))||[],l={type:"IfcPropertyEnumeratedValue",name:e,enumerationReference:{type:"IfcPropertyEnumeration",name:e,enumerationValues:r},enumerationValues:r};t.propertyUri&&(l.specification=t.propertyUri);const o=t.predefinedValue?[Y(t.dataType,t.predefinedValue)]:Bt(t.dataType,a,s,e,r);return o.length>0&&(l.enumerationValues=o),l}function Ht(t,e,s,a){const r={type:"IfcPropertySingleValue",name:e,specification:t.propertyUri||""},l=t.predefinedValue?Y(t.dataType,t.predefinedValue):Lt(t.dataType,a,s,e);return l!==null&&(r.nominalValue=l),r}function _t(t,e,s){const{propertyCode:a}=t,r=a||"unknown",l=t.allowedValues?Nt(t,r,e,s):Ht(t,r,e,s);return l.specification=t.propertyUri||"",l}function $t({mainDictionaryClassification:t,recursiveMode:e}){const s=G(),a=D(Ve),r=D(oe),l=D(nt),o=D(Oe),[f,c]=u.useState({});return u.useEffect(()=>{if(!t)return;const p={};[t].forEach(y=>{y.classProperties?.forEach(i=>{if(!i||!i.propertySet)return;const v=i.propertySet||y.name;p[v]||(p[v]={type:"IfcPropertySet",name:v,hasProperties:[]}),p[v].hasProperties.push(_t(i,v,a))})}),s(U(Object.values(p)))},[s,a,t]),u.useEffect(()=>{if(!t)return;const p={};[t].forEach(y=>{y.classProperties?.forEach(i=>{i&&i.propertyUri&&(o&&l&&l[o]&&l[o][i.propertyUri]?p[i.propertyUri]=l[o][i.propertyUri]||"":p[i.propertyUri]=i.name)})}),c(p)},[t,e,a,l,o]),n.jsx("div",{children:u.Children.toArray(r?.map((p,x)=>n.jsx(R,{variant:"contained",radius:"xs",children:n.jsxs(R.Item,{value:p.name||"Unknown",style:x!==0?{borderTopWidth:0}:{},children:[n.jsx(R.Control,{children:p.name}),n.jsx(R.Panel,{children:n.jsx(ie,{children:u.Children.toArray(p.hasProperties.map(y=>{const i=y.specification?f[y.specification]:"";return n.jsx(Rt,{propertySet:p,property:y,propertyNaturalLanguageName:i})}))})})]},p.name||"Unknown")})))})}function Ft({api:t,defaultSelection:e}){const s=G(),{t:a}=z(),r=D(Ee),l=D(at),[o,f]=u.useState([]),c=u.useRef(null),[p,x]=u.useState(void 0),[y,i]=u.useState(""),[v]=xt(y,300),[d,h]=u.useState(!1),[m,S]=u.useState(-1);u.useEffect(()=>{e&&!d&&o.length>0&&(o.find(g=>g.value===e.value)?(x(e),i(e.label),c.current&&c.current.blur()):(i(e.label),c.current&&(c.current.focus(),c.current.setSelectionRange(0,c.current.value.length))),h(!0))},[e,d,o]);const C=u.useCallback(b=>{i(b),S(-1);const g=o.filter(j=>j.label.toLowerCase().includes(b.toLowerCase().trim())||j.synonyms?.some(I=>I.toLowerCase().includes(b.toLowerCase().trim())));f(g)},[o]),w=u.useCallback(b=>{const g=o.find(j=>j.value===b);g&&(x(g),c.current&&c.current.blur())},[o]),V=u.useCallback(b=>{if(b.key==="Enter"){if(m>=0&&m<o.length){const g=o[m];i(g.label),w(g.value)}else if(m===-1&&o.length>0){const g=o[0];i(g.label),w(g.value)}c.current&&c.current.blur()}else b.key==="ArrowDown"?S(g=>Math.min(g+1,o.length-1)):b.key==="ArrowUp"&&S(g=>Math.max(g-1,-1))},[m,o,w]);u.useEffect(()=>{if(r){const b={SearchText:v,DictionaryUri:r.ifcClassification.location};s(ot(b))}else s(rt([]))},[s,v,r]),u.useEffect(()=>{c.current&&c.current.focus()},[]),u.useEffect(()=>{if(l){if(l.count){const b=l.dictionary?.classes;b&&f(b.filter(g=>g.uri&&g.name).map(g=>({value:g.uri,label:g.name,synonyms:g.synonyms||[]})))}}else f([])},[l]),u.useEffect(()=>{s(p?te(p.value):te(null))},[s,p]);const k=u.useCallback(()=>{C(""),c.current&&c.current.focus(),x(void 0)},[C]),E=({options:b,search:g})=>{const j=g.toLowerCase().trim().split(" ");return b.filter(I=>{const M=I.label.toLowerCase().trim().split(" "),H=I.synonyms?.map(L=>L.toLowerCase().trim().split(" ")).flat()||[];return j.every(L=>M.some(_=>_.includes(L))||H.some(_=>_.includes(L)))})};return n.jsx(le,{label:`${a("searchMainDictionaryLabel")} ${r?r.ifcClassification.name:""}`,data:o,placeholder:"bSDD search...",value:y,onChange:C,onOptionSubmit:w,filter:E,onKeyDown:V,ref:c,style:{width:"100%"},rightSection:n.jsx(je,{size:"sm",onMouseDown:b=>{b.preventDefault()},onClick:k,"aria-label":"Clear value"})})}const X=60.7969;let ye=0,ve=0;function Gt({selectedIfcEntity:t}){const{t:e}=z(),s=G(),{bsddSearchSave:a,bsddSearchCancel:r}=lt(),[l,o]=u.useState(),[f,c]=u.useState(!1),[p,x]=u.useState(new it(Vt[Ot])),y=D(Ee),i=D(Oe),v=D(ct),d=D(ut),h=D(Ve),m=D(dt),S=D(ft),C=D(pt),[w,V]=u.useState(X),[k,E]=u.useState("auto"),[b,g]=u.useState(!1),j=D(Ie);u.useEffect(()=>{t&&s(ht(t))},[s,t]);function I(O,A){return{ifcData:[O],settings:S,propertyIsInstanceMap:A}}const M=u.useCallback(O=>{console.log("Sending bsddSearchSave data back to host",O),a(I(O,C)).then(A=>{console.log("Sent iFC data back to host",A)})},[a,C]);u.useEffect(()=>{if(!j||!b)return;const O=j.classProperties||[];s(mt({classProperties:O,languageCode:i}))},[j,b,i,s]),u.useEffect(()=>{if(!h||!y)return;const O=y.ifcClassification.location;h.hasAssociations?.forEach(A=>{if(A.type==="IfcClassificationReference"){const B=A;B.referencedSource?.location&&B.referencedSource.location===O&&(B.location&&s(te(B.location)),o({label:B.name,value:B.location}))}})},[y,h,s]),u.useEffect(()=>{m&&s(gt(m))},[m,s]),u.useEffect(()=>{E(`${w*v.length+48}px`)},[v.length,w]);const H=O=>{const A=ve+(O.clientY-ye)/v.length;V(A>X?A:X)},L=()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",L)},_=O=>{ye=O.clientY,ve=w,document.addEventListener("mousemove",H),document.addEventListener("mouseup",L)},J=O=>{g(O.includes("Propertysets"))};return n.jsxs(yt,{children:[n.jsx(F,{type:"hidden",name:"ifcType",id:"ifcType",value:""}),n.jsx(F,{type:"hidden",name:"name",id:"name",value:""}),n.jsx(F,{type:"hidden",name:"material",id:"material",value:""}),n.jsx(W,{mx:"md",mt:"lg",mb:"sm",children:n.jsx(Ft,{api:p,defaultSelection:l})}),m?n.jsxs(n.Fragment,{children:[n.jsxs(R,{defaultValue:["Classifications"],multiple:!0,onChange:J,children:[n.jsxs(R.Item,{value:"Classifications",children:[n.jsx(R.Control,{children:n.jsx(he,{order:5,children:e("classificationsLabel")})}),n.jsx(R.Panel,{style:{height:k},children:n.jsx(Mt,{height:w,handleMouseDown:_})})]},"Classifications"),n.jsxs(R.Item,{value:"Propertysets",children:[n.jsx(R.Control,{children:n.jsx(he,{order:5,children:e("propertysetsLabel")})}),n.jsx(R.Panel,{children:n.jsx($t,{mainDictionaryClassification:j,recursiveMode:f})})]},"Propertysets")]}),n.jsxs(W,{my:"sm",justify:"center",children:[n.jsx(Et,{callback:M,ifcEntity:d}),n.jsx(re,{fullWidth:!0,variant:"light",color:"gray",onClick:r,children:e("cancel")})]})]}):n.jsxs(vt,{mx:"md",title:e("noClassificationSelected"),mt:"xl",children:[e("classSearchInstruction"),n.jsx(bt,{h:"md"}),e("needHelp")," ",n.jsx("a",{href:"https://github.com/buildingsmart-community/bSDD-Revit-plugin/wiki",target:"_blank",rel:"noreferrer",children:e("checkDocumentation")})]})]})}export{Gt as B,K as P};
