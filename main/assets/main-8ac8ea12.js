import{r as p,m as Q,n as x,p as P,R as m,B as w,q as T,o as L,x as $,U as le,L as X,v as ce,s as B,g as Y,y as ie,b as de,P as G,z as ue,D as pe,T as ve,E as _,G as F,H as k,I as me,J as fe,K as he,j as l,M as A,N as E,Q as W,S as O,V as ye,W as ge,X as xe,Y as Ce,Z as be}from"./useCefSharpBridge-53bcffdc.js";function z(o,s){return e=>{o?.(e),s?.(e)}}function je(o=!1,s){const{onOpen:e,onClose:t}=s||{},[r,n]=p.useState(o),a=p.useCallback(()=>{n(c=>c||(e?.(),!0))},[e]),i=p.useCallback(()=>{n(c=>c&&(t?.(),!1))},[t]),d=p.useCallback(()=>{r?i():a()},[i,a,r]);return[r,{open:a,close:i,toggle:d}]}var R={root:"m-8d3f4000",loader:"m-302b9fb1",group:"m-1a0f1b21"};const Z={orientation:"horizontal"},we=T((o,{borderWidth:s})=>({group:{"--ai-border-width":L(s)}})),K=Q((o,s)=>{const e=x("ActionIconGroup",Z,o),{className:t,style:r,classNames:n,styles:a,unstyled:i,orientation:d,vars:c,borderWidth:u,variant:h,...g}=x("ActionIconGroup",Z,o),C=P({name:"ActionIconGroup",props:e,classes:R,className:t,style:r,classNames:n,styles:a,unstyled:i,vars:c,varsResolver:we,rootSelector:"group"});return m.createElement(w,{...C("group"),ref:s,variant:h,mod:{"data-orientation":d},role:"group",...g})});K.classes=R;K.displayName="@mantine/core/ActionIconGroup";const Se={},Ee=T((o,{size:s,radius:e,variant:t,gradient:r,color:n})=>{const a=o.variantColorResolver({color:n||o.primaryColor,theme:o,gradient:r,variant:t||"filled"});return{root:{"--ai-size":ce(s,"ai-size"),"--ai-radius":e===void 0?void 0:B(e),"--ai-bg":n||t?a.background:void 0,"--ai-hover":n||t?a.hover:void 0,"--ai-hover-color":n||t?a.hoverColor:void 0,"--ai-color":n||t?a.color:void 0,"--ai-bd":n||t?a.border:void 0}}}),N=$((o,s)=>{const e=x("ActionIcon",Se,o),{className:t,unstyled:r,variant:n,classNames:a,styles:i,style:d,loading:c,loaderProps:u,size:h,color:g,radius:C,__staticSelector:f,gradient:v,vars:y,children:S,disabled:b,"data-disabled":I,...ae}=e,V=P({name:["ActionIcon",f],props:e,className:t,style:d,classes:R,classNames:a,styles:i,unstyled:r,vars:y,varsResolver:Ee});return m.createElement(le,{...V("root",{active:!b&&!c&&!I}),...ae,unstyled:r,variant:n,size:h,disabled:b||c,ref:s,mod:{loading:c,disabled:b||I}},c?m.createElement(X,{...V("loader"),color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u}):S)});N.classes=R;N.displayName="@mantine/core/ActionIcon";N.Group=K;var ee={root:"m-9814e45f"};const Ne={zIndex:Y("modal")},De=T((o,{gradient:s,color:e,backgroundOpacity:t,blur:r,radius:n,zIndex:a})=>({root:{"--overlay-bg":s||(e!==void 0||t!==void 0)&&ie(e||"#000",t??.6)||void 0,"--overlay-filter":r?`blur(${L(r)})`:void 0,"--overlay-radius":n===void 0?void 0:B(n),"--overlay-z-index":a?.toString()}})),M=$((o,s)=>{const e=x("Overlay",Ne,o),{classNames:t,className:r,style:n,styles:a,unstyled:i,vars:d,fixed:c,center:u,children:h,radius:g,zIndex:C,gradient:f,blur:v,color:y,backgroundOpacity:S,...b}=e,I=P({name:"Overlay",props:e,classes:ee,className:r,style:n,classNames:t,styles:a,unstyled:i,vars:d,varsResolver:De});return m.createElement(w,{ref:s,...I("root"),mod:{center:u,fixed:c},...b},h)});M.classes=ee;M.displayName="@mantine/core/Overlay";var oe={root:"m-de3d2490",colorOverlay:"m-862f3d1b",shadowOverlay:"m-98ae7f22",alphaOverlay:"m-95709ac0",childrenOverlay:"m-93e74e3"};const q={withShadow:!0},Pe=T((o,{radius:s,size:e})=>({root:{"--cs-radius":s===void 0?void 0:B(s),"--cs-size":L(e)}})),D=$((o,s)=>{const e=x("ColorSwatch",q,o),{classNames:t,className:r,style:n,styles:a,unstyled:i,vars:d,color:c,size:u,radius:h,withShadow:g,children:C,variant:f,...v}=x("ColorSwatch",q,e),y=P({name:"ColorSwatch",props:e,classes:oe,className:r,style:n,classNames:t,styles:a,unstyled:i,vars:d,varsResolver:Pe});return m.createElement(w,{ref:s,variant:f,size:u,...y("root",{focusable:!0}),...v},m.createElement("span",{...y("alphaOverlay")}),g&&m.createElement("span",{...y("shadowOverlay")}),m.createElement("span",{...y("colorOverlay",{style:{backgroundColor:c}})}),m.createElement("span",{...y("childrenOverlay")},C))});D.classes=oe;D.displayName="@mantine/core/ColorSwatch";function Te({open:o,close:s,openDelay:e,closeDelay:t}){const r=p.useRef(-1),n=p.useRef(-1),a=()=>{window.clearTimeout(r.current),window.clearTimeout(n.current)},i=()=>{a(),e===0||e===void 0?o():r.current=window.setTimeout(o,e)},d=()=>{a(),t===0||t===void 0?s():n.current=window.setTimeout(s,t)};return p.useEffect(()=>a,[]),{openDropdown:i,closeDropdown:d}}const[Ie,se]=de("HoverCard component was not found in the tree"),Oe={};function te(o){const{children:s,onMouseEnter:e,onMouseLeave:t,...r}=x("HoverCardDropdown",Oe,o),n=se(),a=z(e,n.openDropdown),i=z(t,n.closeDropdown);return m.createElement(G.Dropdown,{onMouseEnter:a,onMouseLeave:i,...r},s)}te.displayName="@mantine/core/HoverCardDropdown";const ke={refProp:"ref"},re=p.forwardRef((o,s)=>{const{children:e,refProp:t,eventPropsWrapperName:r,...n}=x("HoverCardTarget",ke,o);if(!ue(e))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=se(),i=z(e.props.onMouseEnter,a.openDropdown),d=z(e.props.onMouseLeave,a.closeDropdown),c={onMouseEnter:i,onMouseLeave:d};return m.createElement(G.Target,{refProp:t,ref:s,...n},p.cloneElement(e,r?{[r]:c}:c))});re.displayName="@mantine/core/HoverCardTarget";const ze={openDelay:0,closeDelay:150,initiallyOpened:!1};function j(o){const{children:s,onOpen:e,onClose:t,openDelay:r,closeDelay:n,initiallyOpened:a,...i}=x("HoverCard",ze,o),[d,{open:c,close:u}]=je(a,{onClose:t,onOpen:e}),{openDropdown:h,closeDropdown:g}=Te({open:c,close:u,openDelay:r,closeDelay:n});return m.createElement(Ie,{value:{openDropdown:h,closeDropdown:g}},m.createElement(G,{...i,opened:d,__staticSelector:"HoverCard"},s))}j.displayName="@mantine/core/HoverCard";j.Target=re;j.Dropdown=te;j.extend=o=>o;var ne={root:"m-6e45937b",loader:"m-e8eb006c",overlay:"m-df587f17"};const J={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Y("overlay")},Me=T((o,{zIndex:s})=>({root:{"--lo-z-index":s?.toString()}})),U=Q((o,s)=>{const e=x("LoadingOverlay",J,o),{classNames:t,className:r,style:n,styles:a,unstyled:i,vars:d,transitionProps:c,loaderProps:u,overlayProps:h,visible:g,zIndex:C,...f}=e,v=pe(),y=P({name:"LoadingOverlay",classes:ne,props:e,className:r,style:n,classNames:t,styles:a,unstyled:i,vars:d,varsResolver:Me}),S={...J.overlayProps,...h};return m.createElement(ve,{transition:"fade",...c,mounted:!!g},b=>m.createElement(w,{...y("root",{style:b}),ref:s,...f},m.createElement(X,{...y("loader"),unstyled:i,...u}),m.createElement(M,{...S,...y("overlay"),"data-light":!0,unstyled:i,color:h?.color||v.white}),m.createElement(M,{...S,...y("overlay"),"data-dark":!0,unstyled:i,color:h?.color||v.colors.dark[5]})))});U.classes=ne;U.displayName="@mantine/core/LoadingOverlay";/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Re=_("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ae=_("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var He=_("outline","pointer","IconPointer",[["path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z",key:"svg-0"}]]);const H={grey:"#B0B0B0",red:"#FF0000",orange:"#FFA500",green:"#00C853"};function Le(o){const{type:s}=o;return s==="IfcClassificationReference"}function $e(o,s){const e=s.referencedSource;return e&&e.location?e.location===o:!1}function Be(o,s){const e=o.hasAssociations;return e&&e.find(r=>Le(r)&&$e(s.ifcClassification?.location,r))?s.ifcClassification?.location:null}function Ge({item:o,index:s,setCardColor:e}){const{t}=F(),r=k(me),n=k(fe),{bsddSearch:a,bsddSelect:i}=he(),[d,c]=p.useState("grey"),[u,h]=p.useState([]),[g,C]=p.useState([]);return p.useEffect(()=>{function f(v){c(v),e(s,v)}u.every(v=>v!==null)?f("green"):u.some(v=>v!==null)?f("orange"):f("red")},[u,s,e]),p.useEffect(()=>{const f=u.map(v=>v!==null?"green":"red");C(f)},[u]),p.useEffect(()=>{h(r.map(f=>Be(o,f)))},[o,r]),l.jsxs(A,{mt:"xs",justify:"space-between",className:"flexGroup",children:[l.jsx(D,{size:"1.5em",color:H[d]}),l.jsxs(j,{position:"bottom-end",shadow:"md",children:[l.jsx(j.Target,{children:l.jsx("div",{className:"flexTextContainer",children:l.jsx(E,{className:"truncate",children:o.name})})}),l.jsxs(j.Dropdown,{children:[l.jsxs(E,{children:[t("dictionaryValidationSummaryLabel"),":"]}),r.map((f,v)=>{const y=f.ifcClassification.location||v;return l.jsxs(A,{mt:"xs",justify:"space-between",className:"flexGroup",children:[l.jsx(D,{size:"1em",color:H[g[v]]}),l.jsx("div",{className:"flexTextContainer",children:l.jsx(E,{className:"truncate",children:f.ifcClassification.name})})]},y)})]})]}),l.jsx(W,{label:t("attachToType"),children:l.jsx(N,{radius:"xl",onClick:()=>a(o),disabled:!n?.ifcClassification?.location,children:l.jsx(Ae,{size:20})})}),l.jsx(W,{label:t("selectObjects"),children:l.jsx(N,{radius:"xl",onClick:()=>i(o),children:l.jsx(He,{size:20})})})]})}function _e({category:o,items:s,index:e}){const{t}=F(),[r,n]=p.useState("grey"),[a,i]=p.useState(new Array(s.length).fill("grey")),d=p.useCallback((c,u)=>{i(h=>{const g=[...h];return g[c]=u,g})},[]);return p.useEffect(()=>{a.includes("orange")||a.includes("red")&&a.includes("green")?n("orange"):a.every(c=>c==="red")?n("red"):a.every(c=>c==="green")&&n("green")},[a]),l.jsxs(O.Item,{value:e,children:[l.jsx(O.Control,{children:l.jsxs(A,{justify:"space-between",className:"flexGroup",children:[l.jsx(D,{size:"1.5em",color:H[r],children:l.jsx(E,{size:"xs",c:"white",children:s.length})}),l.jsx("div",{className:"flexTextContainer",children:l.jsx(E,{className:"truncate",children:o.length>0?o:t("noDescription")})})]})}),l.jsx(O.Panel,{mt:"-xs",pl:"xl",children:s.map((c,u)=>l.jsx(Ge,{item:c,index:u,setCardColor:d},u))})]},o)}function Fe(o,s){const e=o.reduce((t,r)=>{const n=r[s];return n===void 0||typeof n!="string"?(t[""]||(t[""]=[]),t[""].push(r)):(t[n]||(t[n]=[]),t[n].push(r)),t},{});return Object.keys(e).sort((t,r)=>t.localeCompare(r,void 0,{numeric:!1})).reduce((t,r)=>(t[r]=e[r],t),{})}function Ke({loading:o}){const{t:s}=F(),e=k(ye),[t,r]=p.useState("objectType"),n=p.useMemo(()=>e?Object.entries(Fe(e,t)).map(([d,c],u)=>l.jsx(_e,{category:d,items:c,index:d||u.toString()},d)):[],[t,e]),a=l.jsx(Re,{});return l.jsxs(w,{pos:"relative",style:{height:"100vh"},children:[l.jsx(U,{visible:o||!e}),e&&n.length===0?l.jsxs(ge,{title:"No entities selected...",icon:a,mt:"xl",children:[s("entitySelectionInstruction"),l.jsx(xe,{h:"md"}),s("needHelp")," ",l.jsx("a",{href:"https://github.com/buildingsmart-community/bSDD-Revit-plugin/wiki",target:"_blank",rel:"noreferrer",children:s("checkDocumentation")})]}):l.jsxs(w,{children:[l.jsx(Ce,{my:"md",label:s("groupBy"),placeholder:"Select a key",data:[{value:"type",label:"Entity"},{value:"name",label:"Name"},{value:"description",label:"Description"},{value:"objectType",label:"ObjectType"},{value:"predefinedType",label:"PredefinedType"}],value:t,onChange:i=>{i&&r(i)}}),l.jsx(O,{chevronPosition:"left",children:n})]})]})}function Ue(){const o=k(be),[s,e]=p.useState(!0);return p.useEffect(()=>{o&&e(!1)},[o]),l.jsx(Ke,{loading:s})}function We(){return l.jsx(Ue,{})}export{We as M,M as O,je as u};
