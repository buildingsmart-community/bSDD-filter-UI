import{r as p,x as X,y as x,D as P,j as o,B as C,E as T,z as E,J as L,U as de,T as Y,L as q,H as ue,G as $,o as ee,K as pe,k as ve,P as B,M as fe,N as me,Q as G,S as F,b as k,V as he,s as ye,W as xe,X as H,Y as S,Z as W,_ as O,$ as ge,a0 as Ce,a1 as je,a2 as be,a3 as we}from"./defaultSettings-2c0ee7c6.js";function z(s,r){return e=>{s?.(e),r?.(e)}}function Se(s=!1,r){const{onOpen:e,onClose:t}=r||{},[n,a]=p.useState(s),l=p.useCallback(()=>{a(c=>c||(e?.(),!0))},[e]),i=p.useCallback(()=>{a(c=>c&&(t?.(),!1))},[t]),d=p.useCallback(()=>{n?i():l()},[i,l,n]);return[n,{open:l,close:i,toggle:d}]}var A={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Z={orientation:"horizontal"},Ne=T((s,{borderWidth:r})=>({group:{"--ai-border-width":E(r)}})),K=X((s,r)=>{const e=x("ActionIconGroup",Z,s),{className:t,style:n,classNames:a,styles:l,unstyled:i,orientation:d,vars:c,borderWidth:u,variant:m,mod:y,...g}=x("ActionIconGroup",Z,s),v=P({name:"ActionIconGroup",props:e,classes:A,className:t,style:n,classNames:a,styles:l,unstyled:i,vars:c,varsResolver:Ne,rootSelector:"group"});return o.jsx(C,{...v("group"),ref:r,variant:m,mod:[{"data-orientation":d},y],role:"group",...g})});K.classes=A;K.displayName="@mantine/core/ActionIconGroup";const De={},Pe=T((s,{size:r,radius:e,variant:t,gradient:n,color:a,autoContrast:l})=>{const i=s.variantColorResolver({color:a||s.primaryColor,theme:s,gradient:n,variant:t||"filled",autoContrast:l});return{root:{"--ai-size":ue(r,"ai-size"),"--ai-radius":e===void 0?void 0:$(e),"--ai-bg":a||t?i.background:void 0,"--ai-hover":a||t?i.hover:void 0,"--ai-hover-color":a||t?i.hoverColor:void 0,"--ai-color":i.color,"--ai-bd":a||t?i.border:void 0}}}),N=L((s,r)=>{const e=x("ActionIcon",De,s),{className:t,unstyled:n,variant:a,classNames:l,styles:i,style:d,loading:c,loaderProps:u,size:m,color:y,radius:g,__staticSelector:v,gradient:f,vars:h,children:w,disabled:j,"data-disabled":I,autoContrast:V,mod:le,...ie}=e,M=P({name:["ActionIcon",v],props:e,className:t,style:d,classes:A,classNames:l,styles:i,unstyled:n,vars:h,varsResolver:Pe});return o.jsxs(de,{...M("root",{active:!j&&!c&&!I}),...ie,unstyled:n,variant:a,size:m,disabled:j||c,ref:r,mod:[{loading:c,disabled:j||I},le],children:[o.jsx(Y,{mounted:!!c,transition:"slide-down",duration:150,children:ce=>o.jsx(C,{component:"span",...M("loader",{style:ce}),"aria-hidden":!0,children:o.jsx(q,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),o.jsx(C,{component:"span",mod:{loading:c},...M("icon"),children:w})]})});N.classes=A;N.displayName="@mantine/core/ActionIcon";N.Group=K;var oe={root:"m_9814e45f"};const Te={zIndex:ee("modal")},Ie=T((s,{gradient:r,color:e,backgroundOpacity:t,blur:n,radius:a,zIndex:l})=>({root:{"--overlay-bg":r||(e!==void 0||t!==void 0)&&pe(e||"#000",t??.6)||void 0,"--overlay-filter":n?`blur(${E(n)})`:void 0,"--overlay-radius":a===void 0?void 0:$(a),"--overlay-z-index":l?.toString()}})),_=L((s,r)=>{const e=x("Overlay",Te,s),{classNames:t,className:n,style:a,styles:l,unstyled:i,vars:d,fixed:c,center:u,children:m,radius:y,zIndex:g,gradient:v,blur:f,color:h,backgroundOpacity:w,mod:j,...I}=e,V=P({name:"Overlay",props:e,classes:oe,className:n,style:a,classNames:t,styles:l,unstyled:i,vars:d,varsResolver:Ie});return o.jsx(C,{ref:r,...V("root"),mod:[{center:u,fixed:c},j],...I,children:m})});_.classes=oe;_.displayName="@mantine/core/Overlay";var se={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const J={withShadow:!0},Oe=T((s,{radius:r,size:e})=>({root:{"--cs-radius":r===void 0?void 0:$(r),"--cs-size":E(e)}})),D=L((s,r)=>{const e=x("ColorSwatch",J,s),{classNames:t,className:n,style:a,styles:l,unstyled:i,vars:d,color:c,size:u,radius:m,withShadow:y,children:g,variant:v,...f}=x("ColorSwatch",J,e),h=P({name:"ColorSwatch",props:e,classes:se,className:n,style:a,classNames:t,styles:l,unstyled:i,vars:d,varsResolver:Oe});return o.jsxs(C,{ref:r,variant:v,size:u,...h("root",{focusable:!0}),...f,children:[o.jsx("span",{...h("alphaOverlay")}),y&&o.jsx("span",{...h("shadowOverlay")}),o.jsx("span",{...h("colorOverlay",{style:{backgroundColor:c}})}),o.jsx("span",{...h("childrenOverlay"),children:g})]})});D.classes=se;D.displayName="@mantine/core/ColorSwatch";function ke({open:s,close:r,openDelay:e,closeDelay:t}){const n=p.useRef(-1),a=p.useRef(-1),l=()=>{window.clearTimeout(n.current),window.clearTimeout(a.current)},i=()=>{l(),e===0||e===void 0?s():n.current=window.setTimeout(s,e)},d=()=>{l(),t===0||t===void 0?r():a.current=window.setTimeout(r,t)};return p.useEffect(()=>l,[]),{openDropdown:i,closeDropdown:d}}const[ze,re]=ve("HoverCard component was not found in the tree"),_e={};function te(s){const{children:r,onMouseEnter:e,onMouseLeave:t,...n}=x("HoverCardDropdown",_e,s),a=re(),l=z(e,a.openDropdown),i=z(t,a.closeDropdown);return o.jsx(B.Dropdown,{onMouseEnter:l,onMouseLeave:i,...n,children:r})}te.displayName="@mantine/core/HoverCardDropdown";const Ae={refProp:"ref"},ne=p.forwardRef((s,r)=>{const{children:e,refProp:t,eventPropsWrapperName:n,...a}=x("HoverCardTarget",Ae,s);if(!fe(e))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const l=re(),i=z(e.props.onMouseEnter,l.openDropdown),d=z(e.props.onMouseLeave,l.closeDropdown),c={onMouseEnter:i,onMouseLeave:d};return o.jsx(B.Target,{refProp:t,ref:r,...a,children:p.cloneElement(e,n?{[n]:c}:c)})});ne.displayName="@mantine/core/HoverCardTarget";const Me={openDelay:0,closeDelay:150,initiallyOpened:!1};function b(s){const{children:r,onOpen:e,onClose:t,openDelay:n,closeDelay:a,initiallyOpened:l,...i}=x("HoverCard",Me,s),[d,{open:c,close:u}]=Se(l,{onClose:t,onOpen:e}),{openDropdown:m,closeDropdown:y}=ke({open:c,close:u,openDelay:n,closeDelay:a});return o.jsx(ze,{value:{openDropdown:m,closeDropdown:y},children:o.jsx(B,{...i,opened:d,__staticSelector:"HoverCard",children:r})})}b.displayName="@mantine/core/HoverCard";b.Target=ne;b.Dropdown=te;b.extend=s=>s;var ae={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Q={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:ee("overlay")},He=T((s,{zIndex:r})=>({root:{"--lo-z-index":r?.toString()}})),U=X((s,r)=>{const e=x("LoadingOverlay",Q,s),{classNames:t,className:n,style:a,styles:l,unstyled:i,vars:d,transitionProps:c,loaderProps:u,overlayProps:m,visible:y,zIndex:g,...v}=e,f=me(),h=P({name:"LoadingOverlay",classes:ae,props:e,className:n,style:a,classNames:t,styles:l,unstyled:i,vars:d,varsResolver:He}),w={...Q.overlayProps,...m};return o.jsx(Y,{transition:"fade",...c,mounted:!!y,children:j=>o.jsxs(C,{...h("root",{style:j}),ref:r,...v,children:[o.jsx(q,{...h("loader"),unstyled:i,...u}),o.jsx(_,{...w,...h("overlay"),darkHidden:!0,unstyled:i,color:m?.color||f.white}),o.jsx(_,{...w,...h("overlay"),lightHidden:!0,unstyled:i,color:m?.color||f.colors.dark[5]})]})})});U.classes=ae;U.displayName="@mantine/core/LoadingOverlay";/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Re=G("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ee=G("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Le=G("outline","pointer","IconPointer",[["path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z",key:"svg-0"}]]);const R={grey:"#B0B0B0",red:"#FF0000",orange:"#FFA500",green:"#00C853"};function $e(s){const{type:r}=s;return r==="IfcClassificationReference"}function Be(s,r){const e=r.referencedSource;return e&&e.location?e.location===s:!1}function Ge(s,r){const e=s.hasAssociations;return e&&e.find(n=>$e(n)&&Be(r.ifcClassification?.location,n))?r.ifcClassification?.location:null}function Fe({item:s,index:r,setCardColor:e}){const{t}=F(),n=k(he),a=k(ye),{bsddSearch:l,bsddSelect:i}=xe(),[d,c]=p.useState("grey"),[u,m]=p.useState([]),[y,g]=p.useState([]);return p.useEffect(()=>{function v(f){c(f),e(r,f)}u.every(f=>f!==null)?v("green"):u.some(f=>f!==null)?v("orange"):v("red")},[u,r,e]),p.useEffect(()=>{const v=u.map(f=>f!==null?"green":"red");g(v)},[u]),p.useEffect(()=>{m(n.map(v=>Ge(s,v)))},[s,n]),o.jsxs(H,{mt:"xs",justify:"space-between",className:"flexGroup",children:[o.jsx(D,{size:"1.5em",color:R[d]}),o.jsxs(b,{position:"bottom-end",shadow:"md",children:[o.jsx(b.Target,{children:o.jsx("div",{className:"flexTextContainer",children:o.jsx(S,{className:"truncate",children:s.name})})}),o.jsxs(b.Dropdown,{children:[o.jsxs(S,{children:[t("dictionaryValidationSummaryLabel"),":"]}),n.map((v,f)=>{const h=v.ifcClassification.location||f;return o.jsxs(H,{mt:"xs",justify:"space-between",className:"flexGroup",children:[o.jsx(D,{size:"1em",color:R[y[f]]}),o.jsx("div",{className:"flexTextContainer",children:o.jsx(S,{className:"truncate",children:v.ifcClassification.name})})]},h)})]})]}),o.jsx(W,{label:t("attachToType"),children:o.jsx(N,{radius:"xl",onClick:()=>l(s),disabled:!a?.ifcClassification?.location,children:o.jsx(Ee,{size:20})})}),o.jsx(W,{label:t("selectObjects"),children:o.jsx(N,{radius:"xl",onClick:()=>i(s),children:o.jsx(Le,{size:20})})})]})}function Ke({category:s,items:r,index:e}){const{t}=F(),[n,a]=p.useState("grey"),[l,i]=p.useState(new Array(r.length).fill("grey")),d=p.useCallback((c,u)=>{i(m=>{const y=[...m];return y[c]=u,y})},[]);return p.useEffect(()=>{l.includes("orange")||l.includes("red")&&l.includes("green")?a("orange"):l.every(c=>c==="red")?a("red"):l.every(c=>c==="green")&&a("green")},[l]),o.jsxs(O.Item,{value:e,children:[o.jsx(O.Control,{children:o.jsxs(H,{justify:"space-between",className:"flexGroup",children:[o.jsx(D,{size:"1.5em",color:R[n],children:o.jsx(S,{size:"xs",c:"white",children:r.length})}),o.jsx("div",{className:"flexTextContainer",children:o.jsx(S,{className:"truncate",children:s.length>0?s:t("noDescription")})})]})}),o.jsx(O.Panel,{mt:"-xs",pl:"xl",children:r.map((c,u)=>o.jsx(Fe,{item:c,index:u,setCardColor:d},u))})]},s)}function Ue(s,r){const e=s.reduce((t,n)=>{const a=n[r];return a===void 0||typeof a!="string"?(t[""]||(t[""]=[]),t[""].push(n)):(t[a]||(t[a]=[]),t[a].push(n)),t},{});return Object.keys(e).sort((t,n)=>t.localeCompare(n,void 0,{numeric:!1})).reduce((t,n)=>(t[n]=e[n],t),{})}function Ve({loading:s}){const{t:r}=F(),e=k(ge),[t,n]=p.useState("type"),a=p.useMemo(()=>e?Object.entries(Ue(e,t)).map(([d,c],u)=>o.jsx(Ke,{category:d,items:c,index:d||u.toString()},d)):[],[t,e]),l=o.jsx(Re,{});return o.jsxs(C,{pos:"relative",style:{height:"100vh"},children:[o.jsx(U,{visible:s||!e}),e&&a.length===0?o.jsxs(Ce,{title:"No entities selected...",icon:l,mt:"xl",children:[r("entitySelectionInstruction"),o.jsx(je,{h:"md"}),r("needHelp")," ",o.jsx("a",{href:"https://github.com/buildingsmart-community/bSDD-Revit-plugin/wiki",target:"_blank",rel:"noreferrer",children:r("checkDocumentation")})]}):o.jsxs(C,{children:[o.jsx(be,{my:"md",label:r("groupBy"),placeholder:"Select a key",data:[{value:"type",label:"Entity"},{value:"name",label:"Name"},{value:"description",label:"Description"},{value:"objectType",label:"ObjectType"},{value:"predefinedType",label:"PredefinedType"}],value:t,onChange:i=>{i&&n(i)}}),o.jsx(O,{chevronPosition:"left",children:a})]})]})}function Ze(){const s=k(we),[r,e]=p.useState(!0);return p.useEffect(()=>{s&&e(!1)},[s]),o.jsx(Ve,{loading:r})}export{Ze as B,_ as O,Se as u};
