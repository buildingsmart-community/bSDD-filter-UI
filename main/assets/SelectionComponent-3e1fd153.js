import{r as u,x as X,y as g,D as I,j as o,B as b,E as O,z as E,J as L,U as de,T as Y,L as q,H as ue,G as B,o as ee,K as pe,k as ve,P as $,M as fe,N as me,Q as G,S as F,b as D,V as he,s as ye,W as xe,X as ge,Y as H,Z as N,_ as W,$ as k,a0 as Ce,a1 as je,a2 as be,a3 as we,a4 as Se}from"./defaultSettings-374ff62d.js";function z(s,t){return e=>{s?.(e),t?.(e)}}function De(s=!1,t){const{onOpen:e,onClose:r}=t||{},[n,a]=u.useState(s),l=u.useCallback(()=>{a(c=>c||(e?.(),!0))},[e]),i=u.useCallback(()=>{a(c=>c&&(r?.(),!1))},[r]),d=u.useCallback(()=>{n?i():l()},[i,l,n]);return[n,{open:l,close:i,toggle:d}]}var M={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Z={orientation:"horizontal"},Ne=O((s,{borderWidth:t})=>({group:{"--ai-border-width":E(t)}})),K=X((s,t)=>{const e=g("ActionIconGroup",Z,s),{className:r,style:n,classNames:a,styles:l,unstyled:i,orientation:d,vars:c,borderWidth:m,variant:p,mod:y,...C}=g("ActionIconGroup",Z,s),x=I({name:"ActionIconGroup",props:e,classes:M,className:r,style:n,classNames:a,styles:l,unstyled:i,vars:c,varsResolver:Ne,rootSelector:"group"});return o.jsx(b,{...x("group"),ref:t,variant:p,mod:[{"data-orientation":d},y],role:"group",...C})});K.classes=M;K.displayName="@mantine/core/ActionIconGroup";const Pe={},Te=O((s,{size:t,radius:e,variant:r,gradient:n,color:a,autoContrast:l})=>{const i=s.variantColorResolver({color:a||s.primaryColor,theme:s,gradient:n,variant:r||"filled",autoContrast:l});return{root:{"--ai-size":ue(t,"ai-size"),"--ai-radius":e===void 0?void 0:B(e),"--ai-bg":a||r?i.background:void 0,"--ai-hover":a||r?i.hover:void 0,"--ai-hover-color":a||r?i.hoverColor:void 0,"--ai-color":i.color,"--ai-bd":a||r?i.border:void 0}}}),P=L((s,t)=>{const e=g("ActionIcon",Pe,s),{className:r,unstyled:n,variant:a,classNames:l,styles:i,style:d,loading:c,loaderProps:m,size:p,color:y,radius:C,__staticSelector:x,gradient:j,vars:h,children:v,disabled:f,"data-disabled":S,autoContrast:V,mod:le,...ie}=e,A=I({name:["ActionIcon",x],props:e,className:r,style:d,classes:M,classNames:l,styles:i,unstyled:n,vars:h,varsResolver:Te});return o.jsxs(de,{...A("root",{active:!f&&!c&&!S}),...ie,unstyled:n,variant:a,size:p,disabled:f||c,ref:t,mod:[{loading:c,disabled:f||S},le],children:[o.jsx(Y,{mounted:!!c,transition:"slide-down",duration:150,children:ce=>o.jsx(b,{component:"span",...A("loader",{style:ce}),"aria-hidden":!0,children:o.jsx(q,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...m})})}),o.jsx(b,{component:"span",mod:{loading:c},...A("icon"),children:v})]})});P.classes=M;P.displayName="@mantine/core/ActionIcon";P.Group=K;var oe={root:"m_9814e45f"};const Ie={zIndex:ee("modal")},Oe=O((s,{gradient:t,color:e,backgroundOpacity:r,blur:n,radius:a,zIndex:l})=>({root:{"--overlay-bg":t||(e!==void 0||r!==void 0)&&pe(e||"#000",r??.6)||void 0,"--overlay-filter":n?`blur(${E(n)})`:void 0,"--overlay-radius":a===void 0?void 0:B(a),"--overlay-z-index":l?.toString()}})),_=L((s,t)=>{const e=g("Overlay",Ie,s),{classNames:r,className:n,style:a,styles:l,unstyled:i,vars:d,fixed:c,center:m,children:p,radius:y,zIndex:C,gradient:x,blur:j,color:h,backgroundOpacity:v,mod:f,...S}=e,V=I({name:"Overlay",props:e,classes:oe,className:n,style:a,classNames:r,styles:l,unstyled:i,vars:d,varsResolver:Oe});return o.jsx(b,{ref:t,...V("root"),mod:[{center:m,fixed:c},f],...S,children:p})});_.classes=oe;_.displayName="@mantine/core/Overlay";var se={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const J={withShadow:!0},ke=O((s,{radius:t,size:e})=>({root:{"--cs-radius":t===void 0?void 0:B(t),"--cs-size":E(e)}})),T=L((s,t)=>{const e=g("ColorSwatch",J,s),{classNames:r,className:n,style:a,styles:l,unstyled:i,vars:d,color:c,size:m,radius:p,withShadow:y,children:C,variant:x,...j}=g("ColorSwatch",J,e),h=I({name:"ColorSwatch",props:e,classes:se,className:n,style:a,classNames:r,styles:l,unstyled:i,vars:d,varsResolver:ke});return o.jsxs(b,{ref:t,variant:x,size:m,...h("root",{focusable:!0}),...j,children:[o.jsx("span",{...h("alphaOverlay")}),y&&o.jsx("span",{...h("shadowOverlay")}),o.jsx("span",{...h("colorOverlay",{style:{backgroundColor:c}})}),o.jsx("span",{...h("childrenOverlay"),children:C})]})});T.classes=se;T.displayName="@mantine/core/ColorSwatch";function ze({open:s,close:t,openDelay:e,closeDelay:r}){const n=u.useRef(-1),a=u.useRef(-1),l=()=>{window.clearTimeout(n.current),window.clearTimeout(a.current)},i=()=>{l(),e===0||e===void 0?s():n.current=window.setTimeout(s,e)},d=()=>{l(),r===0||r===void 0?t():a.current=window.setTimeout(t,r)};return u.useEffect(()=>l,[]),{openDropdown:i,closeDropdown:d}}const[_e,te]=ve("HoverCard component was not found in the tree"),Me={};function re(s){const{children:t,onMouseEnter:e,onMouseLeave:r,...n}=g("HoverCardDropdown",Me,s),a=te(),l=z(e,a.openDropdown),i=z(r,a.closeDropdown);return o.jsx($.Dropdown,{onMouseEnter:l,onMouseLeave:i,...n,children:t})}re.displayName="@mantine/core/HoverCardDropdown";const Ae={refProp:"ref"},ne=u.forwardRef((s,t)=>{const{children:e,refProp:r,eventPropsWrapperName:n,...a}=g("HoverCardTarget",Ae,s);if(!fe(e))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const l=te(),i=z(e.props.onMouseEnter,l.openDropdown),d=z(e.props.onMouseLeave,l.closeDropdown),c={onMouseEnter:i,onMouseLeave:d};return o.jsx($.Target,{refProp:r,ref:t,...a,children:u.cloneElement(e,n?{[n]:c}:c)})});ne.displayName="@mantine/core/HoverCardTarget";const He={openDelay:0,closeDelay:150,initiallyOpened:!1};function w(s){const{children:t,onOpen:e,onClose:r,openDelay:n,closeDelay:a,initiallyOpened:l,...i}=g("HoverCard",He,s),[d,{open:c,close:m}]=De(l,{onClose:r,onOpen:e}),{openDropdown:p,closeDropdown:y}=ze({open:c,close:m,openDelay:n,closeDelay:a});return o.jsx(_e,{value:{openDropdown:p,closeDropdown:y},children:o.jsx($,{...i,opened:d,__staticSelector:"HoverCard",children:t})})}w.displayName="@mantine/core/HoverCard";w.Target=ne;w.Dropdown=re;w.extend=s=>s;var ae={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Q={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:ee("overlay")},Re=O((s,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}})),U=X((s,t)=>{const e=g("LoadingOverlay",Q,s),{classNames:r,className:n,style:a,styles:l,unstyled:i,vars:d,transitionProps:c,loaderProps:m,overlayProps:p,visible:y,zIndex:C,...x}=e,j=me(),h=I({name:"LoadingOverlay",classes:ae,props:e,className:n,style:a,classNames:r,styles:l,unstyled:i,vars:d,varsResolver:Re}),v={...Q.overlayProps,...p};return o.jsx(Y,{transition:"fade",...c,mounted:!!y,children:f=>o.jsxs(b,{...h("root",{style:f}),ref:t,...x,children:[o.jsx(q,{...h("loader"),unstyled:i,...m}),o.jsx(_,{...v,...h("overlay"),darkHidden:!0,unstyled:i,color:p?.color||j.white}),o.jsx(_,{...v,...h("overlay"),lightHidden:!0,unstyled:i,color:p?.color||j.colors.dark[5]})]})})});U.classes=ae;U.displayName="@mantine/core/LoadingOverlay";/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ee=G("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Le=G("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.22.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Be=G("outline","pointer","IconPointer",[["path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z",key:"svg-0"}]]);const R={grey:"#B0B0B0",red:"#FF0000",orange:"#FFA500",green:"#00C853"};function $e(s){const{type:t}=s;return t==="IfcClassificationReference"}function Ge(s,t){const e=t.referencedSource;return e&&e.location?e.location===s:!1}function Fe(s,t){const e=s.hasAssociations;return e&&e.find(n=>$e(n)&&Ge(t.ifcClassification?.location,n))?t.ifcClassification?.location:null}function Ke({item:s,index:t,setCardColor:e}){const{t:r}=F(),n=D(he),a=D(ye),l=D(xe),{bsddSearch:i,bsddSelect:d}=ge(),[c,m]=u.useState("grey"),[p,y]=u.useState([]),[C,x]=u.useState([]);u.useEffect(()=>{function v(f){m(f),e(t,f)}p.every(f=>f!==null)?v("green"):p.some(f=>f!==null)?v("orange"):v("red")},[p,t,e]),u.useEffect(()=>{const v=p.map(f=>f!==null?"green":"red");x(v)},[p]),u.useEffect(()=>{y(n.map(v=>Fe(s,v)))},[s,n]);function j(v){i({ifcData:[v],settings:l,propertyIsInstanceMap:{}})}function h(v){d([v])}return o.jsxs(H,{mt:"xs",justify:"space-between",className:"flexGroup",children:[o.jsx(T,{size:"1.5em",color:R[c]}),o.jsxs(w,{position:"bottom-end",shadow:"md",children:[o.jsx(w.Target,{children:o.jsx("div",{className:"flexTextContainer",children:o.jsx(N,{className:"truncate",children:s.name})})}),o.jsxs(w.Dropdown,{children:[o.jsxs(N,{children:[r("dictionaryValidationSummaryLabel"),":"]}),n.map((v,f)=>{const S=v.ifcClassification.location||f;return o.jsxs(H,{mt:"xs",justify:"space-between",className:"flexGroup",children:[o.jsx(T,{size:"1em",color:R[C[f]]}),o.jsx("div",{className:"flexTextContainer",children:o.jsx(N,{className:"truncate",children:v.ifcClassification.name})})]},S)})]})]}),o.jsx(W,{label:r("attachToType"),children:o.jsx(P,{radius:"xl",onClick:()=>j(s),disabled:!a?.ifcClassification?.location,children:o.jsx(Le,{size:20})})}),o.jsx(W,{label:r("selectObjects"),children:o.jsx(P,{radius:"xl",onClick:()=>h(s),children:o.jsx(Be,{size:20})})})]})}function Ue({category:s,items:t,index:e}){const{t:r}=F(),[n,a]=u.useState("grey"),[l,i]=u.useState(new Array(t.length).fill("grey")),d=u.useCallback((c,m)=>{i(p=>{const y=[...p];return y[c]=m,y})},[]);return u.useEffect(()=>{l.includes("orange")||l.includes("red")&&l.includes("green")?a("orange"):l.every(c=>c==="red")?a("red"):l.every(c=>c==="green")&&a("green")},[l]),o.jsxs(k.Item,{value:e,children:[o.jsx(k.Control,{children:o.jsxs(H,{justify:"space-between",className:"flexGroup",children:[o.jsx(T,{size:"1.5em",color:R[n],children:o.jsx(N,{size:"xs",c:"white",children:t.length})}),o.jsx("div",{className:"flexTextContainer",children:o.jsx(N,{className:"truncate",children:s.length>0?s:r("noDescription")})})]})}),o.jsx(k.Panel,{mt:"-xs",pl:"xl",children:t.map((c,m)=>o.jsx(Ke,{item:c,index:m,setCardColor:d},m))})]},s)}function Ve(s,t){const e=s.reduce((r,n)=>{const a=n[t];return a===void 0||typeof a!="string"?(r[""]||(r[""]=[]),r[""].push(n)):(r[a]||(r[a]=[]),r[a].push(n)),r},{});return Object.keys(e).sort((r,n)=>r.localeCompare(n,void 0,{numeric:!1})).reduce((r,n)=>(r[n]=e[n],r),{})}function We({loading:s}){const{t}=F(),e=D(Ce),[r,n]=u.useState("type"),a=u.useMemo(()=>e?Object.entries(Ve(e,r)).map(([d,c],m)=>o.jsx(Ue,{category:d,items:c,index:d||m.toString()},d)):[],[r,e]),l=o.jsx(Ee,{});return o.jsxs(b,{pos:"relative",style:{height:"100vh"},children:[o.jsx(U,{visible:s||!e}),e&&a.length===0?o.jsxs(je,{title:"No entities selected...",icon:l,mt:"xl",children:[t("entitySelectionInstruction"),o.jsx(be,{h:"md"}),t("needHelp")," ",o.jsx("a",{href:"https://github.com/buildingsmart-community/bSDD-Revit-plugin/wiki",target:"_blank",rel:"noreferrer",children:t("checkDocumentation")})]}):o.jsxs(b,{children:[o.jsx(we,{my:"md",label:t("groupBy"),placeholder:"Select a key",data:[{value:"type",label:"Entity"},{value:"name",label:"Name"},{value:"description",label:"Description"},{value:"objectType",label:"ObjectType"},{value:"predefinedType",label:"PredefinedType"}],value:r,onChange:i=>{i&&n(i)}}),o.jsx(k,{chevronPosition:"left",children:a})]})]})}function Je(){const s=D(Se),[t,e]=u.useState(!0);return u.useEffect(()=>{s&&e(!1)},[s]),o.jsx(We,{loading:t})}export{Je as B,_ as O,De as u};
